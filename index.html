<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ãŠèª•ç”Ÿæ—¥ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ï¼ï¼</title>
  <style>
    body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Hiragino Kaku Gothic ProN","Noto Sans JP",sans-serif;margin:0;background:#0b1020;color:#fff}
    .wrap{max-width:520px;margin:0 auto;padding:18px}
    .card{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:16px;padding:18px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
    .title{font-size:20px;font-weight:700;margin:0 0 8px}
    .sub{opacity:.85;margin:0 0 16px;line-height:1.6}
    .btn{width:100%;padding:14px 16px;border-radius:14px;border:0;background:#6ee7ff;color:#00121a;font-weight:800;font-size:16px}
    .btn:active{transform:translateY(1px)}
    .muted{opacity:.7;font-size:12px;line-height:1.5}
    .bar{height:10px;background:rgba(255,255,255,.12);border-radius:999px;overflow:hidden;margin:10px 0 18px}
    .bar > div{height:100%;width:0%;background:linear-gradient(90deg,#6ee7ff,#a78bfa);transition:width .35s}
    .step{display:flex;justify-content:space-between;font-size:12px;opacity:.85;margin-top:-10px}
    .roulette{
      display:flex;align-items:center;justify-content:center;
      height:120px;border-radius:16px;border:1px dashed rgba(255,255,255,.25);
      font-size:22px;font-weight:800;letter-spacing:.08em;
      background:rgba(0,0,0,.25);
      margin:14px 0;
    }
    .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.10);border:1px solid rgba(255,255,255,.14);font-size:12px}
    a{color:#9ae6ff}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <p class="pill" id="badge">Step 0/3</p>
      <h1 class="title" id="h">ã‚¿ãƒƒãƒ—ã—ã¦æŠ½é¸ã‚¹ã‚¿ãƒ¼ãƒˆ</h1>
      <p class="sub" id="p">ãŸã£ãŸã®3ã‚¹ãƒ†ãƒƒãƒ—ï¼</p>

      <div class="bar"><div id="prog"></div></div>
      <div class="step"><span>é–‹å§‹</span><span>çµæœ</span></div>

      <div class="roulette" id="slot" style="display:none;">---</div>

      <button class="btn" id="btn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>

      <p class="muted" style="margin-top:14px">
        æ³¨æ„ï¼šå½“é¸ã¯æŠ½é¸ã§ã‚ã‚Šã€åœ¨åº«ãƒ»æœŸé–“ç­‰ã«ã‚ˆã‚Šçµ‚äº†ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚<br/>
        <a href="#" onclick="alert('ç‰¹ã«è¦ç´„ã¯ã‚ã‚Šã¾ã›ã‚“www');return false;">åˆ©ç”¨è¦ç´„</a> /
        <a href="#" onclick="alert('yachiosanãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆé‹å–¶å§”å“¡ä¼š');return false;">é‹å–¶è€…æƒ…å ±</a>
      </p>
    </div>
  </div>

<script>
  const btn = document.getElementById('btn');
  const h = document.getElementById('h');
  const p = document.getElementById('p');
  const badge = document.getElementById('badge');
  const prog = document.getElementById('prog');
  const slot = document.getElementById('slot');

  let step = 0;

  function setStep(s){
    step = s;
    badge.textContent = `Step ${step}/3`;
    prog.style.width = `${(step/3)*100}%`;
  }

  function sleep(ms){ return new Promise(r=>setTimeout(r,ms)); }

  async function spin(){
    slot.style.display = 'flex';
    const items = ["ã¯ãšã‚Œâ€¦","ã‚ã¨å°‘ã—ï¼","ãƒãƒ£ãƒ³ã‚¹ï¼","å½“ãŸã‚Šï¼Ÿ","ã‚‚ã†ä¸€å›ï¼","ãƒ‰ã‚­ãƒ‰ã‚­â€¦"];
    const end = Math.floor(Math.random()*items.length);
    for(let i=0;i<16;i++){
      slot.textContent = items[(i+end)%items.length];
      await sleep(80 + i*10);
    }
  }

  function showResult(){
    // ä¾‹ï¼šå½“é¸ç¢ºç‡ 20%
    const win = Math.random() < 1.0;

    if(win){
      h.textContent = "ãŠã‚ã§ã¨ã†ï¼å½“é¸ã—ã¾ã—ãŸğŸ‰";
      const code = "GIFT-" + Math.random().toString(36).slice(2,8).toUpperCase();
      p.innerHTML = `æŠ½é¸çµæœï¼šå½“é¸<br>ã‚¯ãƒ¼ãƒãƒ³ã‚³ãƒ¼ãƒ‰ï¼š<b>${code}</b><br><small>â€»å—å–ã«ã¯ç”»é¢ã®æ¡ˆå†…ã«å¾“ã£ã¦ãã ã•ã„</small>`;
      btn.textContent = "å—ã‘å–ã‚‹ï¼ˆå¿œå‹Ÿãƒ•ã‚©ãƒ¼ãƒ ã¸ï¼‰";
      btn.onclick = () => {
        // ã“ã“ã‚’è‡ªç¤¾ãƒ•ã‚©ãƒ¼ãƒ URLã«å·®ã—æ›¿ãˆ
        alert("ã“ã“ã§å¿œå‹Ÿ/å—å–ãƒ•ã‚©ãƒ¼ãƒ ã¸é·ç§»ã•ã›ã‚‹ï¼ˆhttps://line.me/ti/p/sLG4eocmuFï¼‰");
      };
    }else{
      h.textContent = "ä»Šå›ã¯æ®‹å¿µâ€¦";
      p.textContent = "æŠ½é¸çµæœï¼šã¯ãšã‚Œï¼ˆå‚åŠ ã‚ã‚ŠãŒã¨ã†ï¼ï¼‰æ¬¡å›ã‚‚æŒ‘æˆ¦ã—ã¦ã­ã€‚";
      btn.textContent = "ã‚‚ã†ä¸€å›ï¼ˆæ¼”å‡ºï¼‰";
      btn.onclick = () => location.reload();
    }
  }

  btn.addEventListener('click', async () => {
    if(step===0){
      setStep(1);
      h.textContent = "Step1ï¼šç¢ºèª";
      p.textContent = "ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã«å‚åŠ ã—ã¾ã™ã‹ï¼Ÿ";
      btn.textContent = "é€²ã‚€";
      return;
    }
    if(step===1){
      setStep(2);
      h.textContent = "Step2ï¼šæŠ½é¸æ¼”å‡º";
      p.textContent = "ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆãŒæ­¢ã¾ã£ãŸã‚‰çµæœã¸é€²ã¿ã¾ã™ã€‚";
      btn.disabled = true;
      await spin();
      btn.disabled = false;
      btn.textContent = "çµæœã‚’è¦‹ã‚‹";
      return;
    }
    if(step===2){
      setStep(3);
      h.textContent = "Step3ï¼šçµæœ";
      p.textContent = "";
      btn.style.display = "none";
      await sleep(200);
      showResult();
      btn.style.display = "block";
      return;
    }
  });

  setStep(0);
</script>
</body>
</html>
