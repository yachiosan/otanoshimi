<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>èª•ç”Ÿæ—¥ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³</title>
<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans JP",sans-serif;
  background:#0b1020;
  color:#fff;
}
.wrap{
  max-width:520px;
  margin:0 auto;
  padding:18px;
}
.card{
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  border-radius:18px;
  padding:20px;
  box-shadow:0 12px 30px rgba(0,0,0,.35);
}
h1{
  font-size:22px;
  margin:0 0 10px;
}
p{
  opacity:.9;
  line-height:1.7;
}
button{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:none;
  font-size:16px;
  font-weight:700;
  background:linear-gradient(90deg,#6ee7ff,#a78bfa);
  color:#00121a;
}
button:active{transform:translateY(1px)}
.bar{
  height:10px;
  background:rgba(255,255,255,.15);
  border-radius:999px;
  overflow:hidden;
  margin:14px 0;
}
.bar > div{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#6ee7ff,#a78bfa);
  transition:width .4s;
}
.slot{
  display:none;
  height:120px;
  border-radius:16px;
  border:1px dashed rgba(255,255,255,.3);
  margin:14px 0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
  font-weight:800;
  background:rgba(0,0,0,.25);
}
img{
  width:100%;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.15);
}
.muted{
  opacity:.7;
  font-size:12px;
  margin-top:12px;
  line-height:1.6;
}
</style>
</head>

<body>
<div class="wrap">
  <div class="card">

    <h1 id="title">ã‚¿ãƒƒãƒ—ã—ã¦ã‚¹ã‚¿ãƒ¼ãƒˆ</h1>
    <p id="text">3ã‚¹ãƒ†ãƒƒãƒ—ã§ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆãŒå—ã‘å–ã‚Œã¾ã™ã€‚</p>

    <div class="bar"><div id="prog"></div></div>

    <div class="slot" id="slot">---</div>

    <button id="btn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>

    <div class="muted">
      â€»æœ¬ãƒšãƒ¼ã‚¸ã¯èª•ç”Ÿæ—¥ç”¨ã®æ¼”å‡ºã§ã™ã€‚<br>
      å‚åŠ ç‰¹å…¸ã¨ã—ã¦ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆãŒå—ã‘å–ã‚Œã¾ã™ã€‚
    </div>

  </div>
</div>

<script>
const btn   = document.getElementById("btn");
const title = document.getElementById("title");
const text  = document.getElementById("text");
const prog  = document.getElementById("prog");
const slot  = document.getElementById("slot");

let step = 0;

function setProgress(n){
  prog.style.width = (n/3*100) + "%";
}

function sleep(ms){ return new Promise(r=>setTimeout(r,ms)); }

async function roulette(){
  slot.style.display = "flex";
  const words = ["ãƒãƒ£ãƒ³ã‚¹â€¦","ç¢ºèªä¸­â€¦","æŠ½é¸ä¸­â€¦","ãƒ‰ã‚­ãƒ‰ã‚­â€¦","çµæœã¯â€¦"];
  for(let i=0;i<18;i++){
    slot.textContent = words[i % words.length];
    await sleep(80 + i*10);
  }
}

btn.onclick = async () => {

  // STEP 1
  if(step === 0){
    step = 1;
    setProgress(1);
    title.textContent = "STEP1ï¼šå‚åŠ ç¢ºèª";
    text.textContent  = "ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã«å‚åŠ ã—ã¾ã™ã‹ï¼Ÿ";
    btn.textContent   = "é€²ã‚€";
    return;
  }

  // STEP 2
  if(step === 1){
    step = 2;
    setProgress(2);
    title.textContent = "STEP2ï¼šã•ãã€å½“ãŸã‚‹ã‹ãªï¼ï¼Ÿï¼ï¼Ÿ";
    text.textContent  = "çµæœã‚’ç¢ºèªã—ã¦ã„ã¾ã™â€¦";
    btn.disabled = true;
    await roulette();
    btn.disabled = false;
    btn.textContent = "çµæœã‚’è¦‹ã‚‹";
    return;
  }

  // STEP 3ï¼ˆ100%å½“ãŸã‚Šï¼‰
  if(step === 2){
    step = 3;
    setProgress(3);
    title.textContent = "ğŸ‰ ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼";
    text.textContent  = "ç”»åƒã‚’ã‚¿ãƒƒãƒ—ã—ã¦æ¬²ã—ã„ã‚‚ã®ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆãã ã•ã„ã€‚";
    btn.remove();

    // ç”»åƒã‚¿ãƒƒãƒ—ã§LINEã¸
    slot.outerHTML = `
      <a href="https://line.me/ti/p/sLG4eocmuF" target="_blank" rel="noopener">
        <img src="line.PNG"
             alt="LINEã§å—ã‘å–ã‚‹">
      </a>
    `;
  }
};
</script>

</body>
</html>
